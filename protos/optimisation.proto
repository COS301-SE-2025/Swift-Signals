syntax = "proto3";

option go_package = "protos/gen/intersection";

service OptimisationService {
  rpc RunOptimisation(OptimisationParameters) returns (OptimisationParameters);
}

message OptimisationParameters {
  OptimisationType optimisation_type = 1;
  SimulationParameters parameters = 2;
}

message SimulationParameters {
  IntersectionType intersection_type = 2;
  int32 green = 3;
  int32 yellow = 4;
  int32 red = 5;
  int32 speed = 6;
  int32 seed = 7;
}

enum IntersectionStatus {
  INTERSECTION_STATUS_UNSPECIFIED = 0;
  INTERSECTION_STATUS_UNOPTIMISED = 1;
  INTERSECTION_STATUS_OPTIMISING = 2;
  INTERSECTION_STATUS_OPTIMISED = 3;
  INTERSECTION_STATUS_FAILED = 4;
}

enum TrafficDensity {
  TRAFFIC_DENSITY_UNSPECIFIED = 0;
  TRAFFIC_DENSITY_LOW = 1;
  TRAFFIC_DENSITY_MEDIUM = 2;
  TRAFFIC_DENSITY_HIGH = 3;
}

enum OptimisationType {
  OPTIMISATION_TYPE_UNSPECIFIED = 0;
  OPTIMISATION_TYPE_NONE = 1;
  OPTIMISATION_TYPE_GRIDSEARCH = 2;
  OPTIMISATION_TYPE_GENETIC_EVALUATION = 3;
}

enum IntersectionType {
  INTERSECTION_TYPE_UNSPECIFIED = 0;
  INTERSECTION_TYPE_TRAFFICLIGHT = 1;
  INTERSECTION_TYPE_TJUNCTION = 2;
  INTERSECTION_TYPE_ROUNDABOUT = 3;
  INTERSECTION_TYPE_STOP_SIGN = 4;
}
